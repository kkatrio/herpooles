<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
  </head>
  <body>

    <canvas id="canvas"></canvas>
    <script type="module">
      import init, {draw, Herpooles } from './pkg/fight_the_poo.js';

      // get canvas context
      const canvas = document.getElementById("canvas");
      canvas.width = 1000;
      canvas.height = 1000;
      const ctx = canvas.getContext("2d");

      async function run() {
          await init();

          // data
          const herpooles = new Herpooles(500, 500);

          function step() {
              draw(ctx, herpooles);
              console.log("step");
              //window.requestAnimationFrame(step);
          }

          window.setInterval(step, 1000);
      }

      run();
    </script>
  </body>
</html>
